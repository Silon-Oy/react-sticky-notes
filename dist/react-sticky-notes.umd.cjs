(function(l,r){typeof exports=="object"&&typeof module<"u"?r(exports,require("react/jsx-runtime"),require("react")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","react"],r):(l=typeof globalThis<"u"?globalThis:l||self,r(l.ReactStickyNotes={},l.jsxRuntime,l.React))})(this,(function(l,r,i){"use strict";const h=[{name:"yellow",bg:"#fef9c3",border:"#facc15",text:"#713f12"},{name:"pink",bg:"#fce7f3",border:"#f472b6",text:"#831843"},{name:"blue",bg:"#dbeafe",border:"#60a5fa",text:"#1e3a5f"},{name:"green",bg:"#dcfce7",border:"#4ade80",text:"#14532d"},{name:"orange",bg:"#ffedd5",border:"#fb923c",text:"#7c2d12"},{name:"purple",bg:"#f3e8ff",border:"#c084fc",text:"#581c87"}];function v(e){try{const s=localStorage.getItem(e);return s?JSON.parse(s):[]}catch{return[]}}function S(e,s){try{localStorage.setItem(e,JSON.stringify(s))}catch{}}function m(e="react-sticky-notes"){const s=`sticky-notes:${e}`,[g,d]=i.useState(()=>v(s));i.useEffect(()=>{S(s,g)},[s,g]);const y=i.useCallback((a,t)=>{const c={id:`n-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,x:a,y:t,text:"",colorIndex:0,minimized:!1,createdAt:Date.now()};return d(u=>[...u,c]),c},[]),o=i.useCallback((a,t)=>{d(c=>c.map(u=>u.id===a?{...u,...t}:u))},[]),b=i.useCallback(a=>{d(t=>t.filter(c=>c.id!==a))},[]);return{notes:g,addNote:y,updateNote:o,deleteNote:b}}const C=`@keyframes stickyNotePulse {
  0%, 100% { transform: scale(1); opacity: 0.85; }
  50% { transform: scale(1.18); opacity: 1; }
}`;let k=!1;function E(){if(k)return;const e=document.createElement("style");e.textContent=C,document.head.appendChild(e),k=!0}function N({note:e,onUpdate:s,onDelete:g}){const d=h[e.colorIndex%h.length],y=i.useRef(null),[o,b]=i.useState(!1),a=i.useRef(!1),t=i.useRef({x:0,y:0});i.useEffect(()=>{E()},[]);const c=i.useCallback((n,f)=>{t.current={x:n-e.x,y:f-e.y},a.current=!1,b(!0)},[e.x,e.y]),u=i.useCallback((n,f)=>{o&&(a.current=!0,s(e.id,{x:n-t.current.x,y:f-t.current.y}))},[o,e.id,s]),w=i.useCallback(()=>{b(!1)},[]);i.useEffect(()=>{if(!o)return;const n=p=>u(p.clientX,p.clientY),f=p=>{p.preventDefault(),u(p.touches[0].clientX,p.touches[0].clientY)},x=()=>w();return window.addEventListener("mousemove",n),window.addEventListener("mouseup",x),window.addEventListener("touchmove",f,{passive:!1}),window.addEventListener("touchend",x),()=>{window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",x),window.removeEventListener("touchmove",f),window.removeEventListener("touchend",x)}},[o,u,w]);const z=()=>{s(e.id,{colorIndex:(e.colorIndex+1)%h.length})},D=()=>{window.confirm("Delete this note?")&&g(e.id)};return e.minimized?r.jsx("div",{onMouseDown:n=>{n.preventDefault(),c(n.clientX,n.clientY)},onTouchStart:n=>{c(n.touches[0].clientX,n.touches[0].clientY)},onClick:()=>{a.current||s(e.id,{minimized:!1})},style:{position:"fixed",left:e.x,top:e.y,width:18,height:18,borderRadius:"50%",backgroundColor:d.border,cursor:o?"grabbing":"pointer",zIndex:1e4,boxShadow:"0 1px 4px rgba(0,0,0,0.2)",animation:o?"none":"stickyNotePulse 2.5s ease-in-out infinite"},title:"Click to expand"}):r.jsxs("div",{ref:y,style:{position:"fixed",left:e.x,top:e.y,width:220,backgroundColor:d.bg,border:`1.5px solid ${d.border}`,borderRadius:8,boxShadow:o?"0 8px 24px rgba(0,0,0,0.18)":"0 2px 8px rgba(0,0,0,0.12)",zIndex:o?10002:10001,fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif",fontSize:13,userSelect:o?"none":"auto",transition:o?"none":"box-shadow 0.2s"},children:[r.jsxs("div",{onMouseDown:n=>{n.preventDefault(),c(n.clientX,n.clientY)},onTouchStart:n=>{c(n.touches[0].clientX,n.touches[0].clientY)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"5px 8px",cursor:"grab",borderBottom:`1px solid ${d.border}`,borderRadius:"8px 8px 0 0",backgroundColor:d.border+"33"},children:[r.jsx("div",{style:{width:30,height:4,borderRadius:2,backgroundColor:d.border,opacity:.5}}),r.jsxs("div",{style:{display:"flex",gap:4},children:[r.jsx("button",{onClick:z,style:{width:18,height:18,borderRadius:"50%",border:`1.5px solid ${d.text}44`,background:`conic-gradient(${h.map((n,f)=>`${n.border} ${f/h.length*100}% ${(f+1)/h.length*100}%`).join(", ")})`,cursor:"pointer",padding:0},title:"Change color"}),r.jsx("button",{onClick:()=>s(e.id,{minimized:!0}),style:{width:18,height:18,borderRadius:"50%",border:"none",background:d.text+"22",color:d.text,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,lineHeight:1,padding:0},title:"Minimize",children:"−"}),r.jsx("button",{onClick:D,style:{width:18,height:18,borderRadius:"50%",border:"none",background:"#ef444433",color:"#dc2626",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,lineHeight:1,padding:0},title:"Delete",children:"×"})]})]}),r.jsx("textarea",{value:e.text,onChange:n=>s(e.id,{text:n.target.value}),placeholder:"Write a note...",style:{width:"100%",minHeight:80,padding:"8px 10px",border:"none",background:"transparent",color:d.text,fontSize:13,fontFamily:"inherit",resize:"vertical",outline:"none",boxSizing:"border-box"}})]})}function I({storageKey:e="react-sticky-notes"}){const{notes:s,addNote:g,updateNote:d,deleteNote:y}=m(e),[o,b]=i.useState(!1),a=i.useCallback(t=>{t.target.closest("[data-sticky-fab]")||t.target.closest("[data-sticky-note]")||(g(t.clientX-110,t.clientY-20),b(!1))},[g]);return i.useEffect(()=>{if(!o)return;const t=c=>{c.key==="Escape"&&b(!1)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[o]),r.jsxs(r.Fragment,{children:[o&&r.jsx("div",{onClick:a,style:{position:"fixed",inset:0,cursor:"crosshair",zIndex:9998,backgroundColor:"rgba(0,0,0,0.05)"}}),s.map(t=>r.jsx("div",{"data-sticky-note":!0,children:r.jsx(N,{note:t,onUpdate:d,onDelete:y})},t.id)),r.jsx("button",{"data-sticky-fab":!0,onClick:()=>b(t=>!t),style:{position:"fixed",bottom:24,right:24,width:48,height:48,borderRadius:"50%",border:"none",backgroundColor:o?"#ef4444":"#fbbf24",color:o?"#fff":"#713f12",fontSize:24,fontWeight:"bold",cursor:"pointer",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,transition:"all 0.2s",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif"},onMouseEnter:t=>{t.currentTarget.style.transform="scale(1.1)"},onMouseLeave:t=>{t.currentTarget.style.transform="scale(1)"},title:o?"Cancel (Esc)":"Add sticky note",children:o?"×":"+"})]})}l.COLORS=h,l.StickyNotes=I,l.useNotes=m,Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})}));
